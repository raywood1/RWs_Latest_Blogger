---
layout: post
title: "Acronis True Image Plus Pack: Converting a Virtual Machine to a Physical Machine"
date: 2010-10-28
---

<div class="post-body">
<p>I was using Windows XP as the guest operating system in a virtual machine (VM) on VMware Workstation 7.1, running on Ubuntu 10.04 (Lucid Lynx).  I had developed <a href="https://web.archive.org/web/20190906053716/http://raywoodcockslatest.blogspot.com/2010/07/tweaking-windows-xp-virtual-machine.html">a customized WinXP installation</a> in that VM.  Now I wanted to install that same tweaked version in physical form, as a dual-boot option on that computer.  I did not want to go through all of the time-consuming steps that had been required to create that tweaked installation.  I hoped, instead, that it would be possible somehow to convert the VM to a physical installation.  This post describes what I tried and learned in that effort.<br/>
<br/>
The fact that both the VM and the physical dual-boot installation would be on the same computer did not necessarily make things easier.  VMware VMs used virtual hardware that did not match my physical hardware.  In other words, simply making an image of the VM and restoring it to the physical machine would run into the same problems as if I made an image on one physical computer and restored it on another.  That's not to say it couldn't be done.  It would just require more than a simple image-and-restore procedure.<br/>
<br/>
There seemed to be <a href="//web.archive.org/web/20190906053716/https://www.google.com/search?num=50&amp;hl=en&amp;newwindow=1&amp;client=firefox-a&amp;rls=org.mozilla:en-US:official&amp;q=%22how+to%22+convert+%22virtual+machine+to%22+OR+%22vm+to%22+physical+xp+-%22windows+7%22+-win7+-vista+-V2V+-KVM&amp;aq=f&amp;aqi&amp;aql&amp;oq&amp;gs_rfai">a couple of different ways to go</a>.  Through <a href="//web.archive.org/web/20190906053716/https://www.google.com/search?num=50&amp;hl=en&amp;newwindow=1&amp;client=firefox-a&amp;rls=org.mozilla:en-US:official&amp;q=%22convert+vmdk%22+OR+%22convert+a+vmdk%22+%22to+physical%22+OR+%22to+a+physical%22+OR+%22to+tib%22+OR+%22to+a+tib%22+-%22to+vhd%22&amp;aq=f&amp;aqi&amp;aql&amp;oq&amp;gs_rfai">a search</a>, I found that VMware itself offered a <a href="https://web.archive.org/web/20190906053716/http://www.vmware.com/support/v2p/index.html">virtual-to-physical (V2P) conversion procedure</a>.  This would permit conversion of the .vmdk file directly to a physical installation.  That procedure was quite complex, however, and that meant there could be quite a few ways in which it might not go exactly according to plan.  There was also the problem that, according to <a href="https://web.archive.org/web/20190906053716/http://www.vmware.com/support/v2p/doc/V2P_TechNote.pdf">the detailed description</a>, they had not actually tested it on Windows XP.  It seemed that it might be worth investing the time in this procedure if I were going to do this frequently.  A quick glance suggested that many of the steps would only be hard or time-consuming the first time around.  For my purposes, though, I was not sure that this would be much faster than just reinstalling Windows from scratch, and it would probably be less reliable.<br/>
<br/>
What looked more promising was to try the <a href="https://web.archive.org/web/20190906053716/http://kb.acronis.com/content/13672">Universal Restore feature</a> of Acronis True Image 2011 (ATI).  Universal Restore was available through <a href="https://web.archive.org/web/20190906053716/http://www.acronis.com/homecomputing/products/trueimage/plus-pack.html">the Plus Pack</a> that had to be purchased in addition to ATI itself.  The combination of ATI and Plus Pack, together, would cost around $80 unless you got it on sale.  The general concept seemed to be that you would install ATI, <a href="https://web.archive.org/web/20190906053716/http://kb.acronis.com/content/13634">install the Plus Pack</a>, create a bootable ATI CD (<a href="https://web.archive.org/web/20190906053716/http://kb.acronis.com/content/1526">or USB drive</a>) that would automatically include the Universal Restore capability (provided you did install the Plus Pack first), use that to make an image of the VM, and then restore that image to the physical machine.  So this is what I decided to try.<br/>
<br/>
When I started poking around the Acronis website in search of guidance on the details of the Universal Restore process, I came across a link to <a href="https://web.archive.org/web/20190906053716/http://kb.acronis.com/search/apachesolr_search/Restoring%20to%20Dissimilar%20Hardware%20with%20Acronis%20True%20Image%20Home%202010%20Plus%20Pack">a search of the Acronis KnowledgeBase</a>.  This turned up more than a thousand entries.  A quick scan of some of the first search results suggested that some of those entries existed because people had run into problems in the Universal Restore process.  It seemed I would need to brace myself for a somewhat finicky and potentially time-consuming effort.  I decided to go ahead with it, though.  Unlike the VMware V2P process, I knew that I had used Acronis many times in recent years, and I figured I would probably be using this procedure again, or something related to it.  So it would hopefully be a productive time investment.<br/>
<br/>
The Universal Restore process was emphatically a <i>restore</i> process.  <a href="https://web.archive.org/web/20190906053716/http://kb.acronis.com/content/13671">The instructions</a> I planned to follow began with the assumption that I already had an Acronis image of the VM that I wanted to convert to a physical installation.  I thought, at first, that making an image of a virtual machine would be a matter of setting up VMware Workstation so that it would boot from the Acronis CD or USB drive (or, conceivably, from an ISO).  I had already worked through that setup process in <a href="https://web.archive.org/web/20190906053716/http://raywoodcockslatest.blogspot.com/2010/07/resizing-virtual-disks-in-vmware.html">another post</a>.  So now I just had to insert my Acronis CD, boot the VM, and make the backup image on a Windows-compatible (e.g., NTFS) partition.  The VM booted, saw the CD, and Acronis started.  In my tweaked Windows installation, I had put the paging file on a separate virtual partition, so I didn't include that in the backup.<br/>
<br/>
For the destination of my backup, unfortunately, I had a problem.  Within this virtual world, Acronis didn't see my "network" drives -- that is, the physical drives located within this same computer that VMware treated as though they were on a network.  I bailed out of the backup process and went into Acronis's Tools &amp; Utilities &gt; Add New Disk.  But that didn't provide a solution either.  <a href="//web.archive.org/web/20190906053716/https://www.google.com/search?num=50&amp;hl=en&amp;newwindow=1&amp;client=firefox-a&amp;hs=bCO&amp;rls=org.mozilla:en-US:official&amp;q=site:acronis.com+%22true+image+home%22+%22virtual+machine%22+backup+vmware+workstation+-VHD+-%22from+tib%22+-restore&amp;aq=f&amp;aqi&amp;aql&amp;oq&amp;gs_rfai">My searches</a> didn't lead to an answer.  A seemingly <a href="https://web.archive.org/web/20190906053716/http://www.acronis.com/r/support/en/kb/932/backup_vm.htm">off-target post</a> gave me the idea that maybe the solution was to install Acronis inside the VM and then try to do the backup there.  So I did that, and it worked.  I saved the system backup to a separate NTFS formatted drive, so that it would be visible to my Acronis CD.<br/>
<br/>
I rebooted the system with the Acronis CD in the drive, and went into Acronis.  I selected Recover &gt; My Disks &gt; Browse and went to the image I wanted to restore.  I chose the Universal Restore option and, hoping that Acronis had already loaded itself into memory, I took out the Acronis CD and inserted my motherboard's driver installation CD.  Then I told Acronis to Add Search Path for the CD drive.  I told it to restore both drive C and the MBR and Track 0.  I designated the new partition where I wanted this to be restored to.  I named that same disk as the target for the MBR recovery.  I went ahead and the recovery process got underway.  After a while, I got an error message,<br/>
<blockquote>Device driver 'PCID\VEN_1002&amp;DEV_4390&amp;SUBSYS_B0021458&amp;REV_00' for 'Microsoft Windows XP Professional' cannot be found.</blockquote>So, oops, apparently Acronis was looking for the drivers that it did include on its own Universal Restore CD, not for the motherboard drivers.  It seemed that I should have left the Acronis CD in the drive for the time being.  The dialog did not give me a "retry" option, so it looked like this restoration might be toast.  I reinserted the Acronis CD, clicked Cancel, and started over.  But after I re-entered the target location and other options, it froze.  I punched the computer's reset button and re-restarted.  So then it went ahead and did the recovery.  But then it wound up at the same error message.  A search for that device driver name produced only four webpages, none in English, but a search for the vendor suggested that Acronis wanted the ATI driver, which I guessed meant the video driver.  So apparently it had not necessarily been a mistake to leave the motherboard's driver CD in the drive, first time around.<br/>
<br/>
My hunch as to the nature of this problem was that simply pointing the installer to the CD drive was not specific enough; it was not going to search all of the subdirectories on the CD to find what it needed.  I put the motherboard CD back in the drive.  I decided, this time, to click the "Ignore" button on the dialog, so it would move on past this error and show me what came next.  Boom!  It immediately said, "Recover operation succeeded."  I wasn't sure it had needed or even looked at the motherboard CD at all.  I took out the CD, closed Acronis, and the system rebooted.  I turned off the power before it got itself fully back up again and disconnected the hard drive that contained my original dual-boot installation of Windows XP, so that now it would have to boot from the newly restored Windows XP partition or nothing.  And the answer was:  nothing.  I got "Error loading operating system."<br/>
<br/>
I did <a href="//web.archive.org/web/20190906053716/https://www.google.com/search?q=acronis+%22universal+restore%22+%22error+loading+operating+system%22&amp;ie=utf-8&amp;oe=utf-8&amp;aq=t&amp;rls=org.mozilla:en-US:official&amp;client=firefox-a">a search</a> and found that, <a href="https://web.archive.org/web/20190906053716/http://forum.acronis.com/forum/15486">for Patrink Zink</a>, the solution was just to do a cold reboot.  Another thread emphasized connecting the new drive to the same SATA port as the previous program drive.  <a href="https://web.archive.org/web/20190906053716/http://forum.acronis.com/forum/7967">Another thread</a> made me wonder whether it would have helped to create the target partition in Acronis rather than using GParted.  <a href="https://web.archive.org/web/20190906053716/http://social.technet.microsoft.com/Forums/en-US/winserverhyperv/thread/c008c5ef-75c1-4a15-b2a1-cc197fb5e9b4">Yet another thread</a> said something about drivers.  I figured that was the answer.  Apparently whatever I had done with the Acronis CD was a flop.  Just out of curiosity, I booted from the Windows XP installation CD and went into the Recovery Console.  I got there by pressing F8 a bunch of times before the "Error loading operating system" message could come up.  Normally, that would have put me into WinXP's Safe Mode, but apparently Safe Mode was not interested in helping me out.  In Recovery Console, I poked around enough to verify that something resembling a Windows operating system had indeed been installed on the drive.  I typed "chkdsk /r" and let that run.  Then I typed "fixboot" and then "fixmbr."  Then I tried rebooting from the hard drive.  No joy; still "error loading operating system."<br/>
<br/>
I started over again with the Acronis CD.  Following <a href="https://web.archive.org/web/20190906053716/http://kb.acronis.com/content/13671">the Acronis guide page</a>, I looked for hard drive controller drivers or chipset drivers.  There was a GSATA folder in the BootDrv folder of the motherboard driver CD, so I designated that as the place for Acronis to look for what it wanted.  But Acronis said "No items to display" when I went to that folder, making me think that it was not finding the right drivers there.  I went into the Chipset folder on the CD, but same thing there.  After checking about 20 folders and finding that none of them had any items that the CD wished to display, I went back to the BootDrv\GSATA folder and designated that, and then proceeded with the recovery process.  It gave me the same error (above).  When it was done, I rebooted.  This time, instead of giving me an "Error loading operating system" message, the cursor just sat there after the "Boot from CD/DVD" line.<br/>
<br/>
I gave it five or ten minutes and then shut the machine down.  I unplugged the new drive and reconnected the old one.  But then -- what's this?  It froze after "Boot from CD/DVD" even though the new drive wasn't connected!  I shut the machine down again, and this time I also disconnected the other hard drive, where I had stored the Acronis backup.  So now only the old Windows program drive was connected.  That worked:  I now got the GRUB2 menu, and the choice of going into Ubuntu or WinXP.  I tried starting the machine again, this time with only the new Windows program drive connected, using the same SATA cable as I had just used with the old drive.  But it was no use:  I got "Error loading operating system" again.<br/>
<br/>
It occurred to me that this was a basic bootup problem, and for that purpose I could try the approach mentioned on another thread.  I had already installed WinXP on this computer, but only in a basic form; I was going to all this trouble because I didn't want to spend the time and effort to install all my Windows programs and configure them.  So far, that decision wasn't paying off.  But I thought perhaps I could copy the needed files from that existing basic Windows installation to my newly created Windows installation from the VM.  So I put the system back the way it was originally, without the new drive, and booted into Ubuntu.  I connected the new drive as an external USB drive and ran a file-comparison utility to see what was different between the files in the basic Windows XP installation and this new one.  (The utility I used was Beyond Compare.)  I really couldn't identify anything that I should be copying over from one to the other.<br/>
<br/>
<a href="https://web.archive.org/web/20190906053716/http://forums.majorgeeks.com/showthread.php?t=135117">Collegedropout said</a> that WinXP could have boot problems when the BIOS was set to recognize hard drives as "Auto."  The solution, s/he said, was to change it to "Large."  I tried that, and rebooted with only the new WinXP drive connected.  In my system's BIOS, this setting was located under Standard CMOS Features.  I had to hit Enter at each hard drive and then change Access Mode to Large.  This did not affect the problem, so I changed it back.<br/>
<br/>
I was tempted to set up the Ubuntu dual-boot on the new drive and see if the Ubuntu bootloader would make any difference, but I decided there was probably no way around it:  I was going to have to figure out what they were talking about, when they referred to "chipset drivers."  I went into Device Manager to get the properties for the SATA hard drive controller (Start &gt; Run &gt; devmgmt.msc), but I didn't see it.  I did have the option of putting in a service request to Acronis, but at this ponit I decided I had invested enough time in this experiment.  I decided to just install WinXP manually on the new drive, and to see if I could return Acronis True Image Home 2011 and/or its Plus Pack for a refund.</p>
<div style="clear: both;"></div>
</div>

---
### Comments
**raywood**:
Before wiping out the WinXP installation and starting over, I tried the option, on the WinXP installation disk, of repairing the existing installation.  Windows Setup detected that installation and copied files over to the hard drive.  As expected, that did not alter the outcome:  I still got "Error loading operating system."

**Anonymous**:
Hello raywood,This is Anton Deev from Acronis support.I am very sorry about this issue but I will do my best to assist you.Allow my to clarify about the drivers needed for successful restoration with Acronis Universal Restore. They files should have *.inf, *.sys or *.oem extensions and you can download them from your hardware manufacturer's website.Unfortunately it is not certain what caused the newly restored OS to boot with this error, but if we had an Acronis report from both the source and target OS I am certain we could have got to the bottom of this.Should you need additional assistance or have any other questions you can always contact me in our Support forum: http://forum.acronis.com/Thank you.Anton

**raywood**:
But that's not a clarification.  That's what the instructions say.  But which drivers am I looking for -- that is, drivers for which component?As for additional troubleshooting, if Acronis had been helping people address the problems I encountered, I would have seen the solutions in some of the posts I examined while doing my own search.  I am plainly not the first person who has wrestled with these problems in Acronis True Image Home 2010 or 2011.As a postscript, I next tried using ATIH 2011 to simply back up and restore a partition.  It was not able to detect the drive to which I was doing the restoration.  Every other utility I tried -- Windows XP Installation Disk (Recovery Console), Ubuntu 10.04, GParted -- was able to see the disk without a problem.  This was a very standard Seagate hard drive, running on a bestselling motherboard.  Yet ATIH 2011 could not see it.  So I tried restoring the backup with ATIH 11 (not 2011 -- the old Acronis True Image Home 11).  It was not able to restore an image made in ATIH 2011.  But it did see the target drive without a problem.  Ultimately, I used my old, tried and true ATIH 11 to make and restore the image.For my purposes, ATIH 2011 is junk.  People told me that.  Yet I wanted it to work, so I tried it and invested the time.  If Acronis wants to assign employees to solving customers' problems, it should start by hiring enough people to fix this product and should offer a free update to those who made the mistake of buying it.

**James**:
raywood,Some time ago I executed the recovery of VM images to physical machines, and everything ran smoothly. I used ATIH 2011 to recover archives to ASUS-based systems. The only difference was that I didn't build the dual-boot systems, but I suppose the glitch happened during the recovery, and we shouldn't take into consideration the difference between our systems.I do not know the reason, but I assume that the problem could be caused by the drivers' discrepancy, and it may be not Acronis fault.Here are some thoughts:Acronis recognizes only certain extensions (.oem . sys .inf). The best way is to go to the vendors' web site and to download the newest drivers there.Save the drivers locally (for example, to the same partition you managed to save the archive to).Contact support and request a custom CD. It differs from the standard one and it may work better for you.

**Anonymous**:
This error has nothing to do with drivers - the message is produced  by MBR sector code even before the Windows' boot sector is loaded. It may be caused by drive geometry.

