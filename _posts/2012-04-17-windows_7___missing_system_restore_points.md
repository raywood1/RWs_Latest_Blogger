---
layout: post
title: "Windows 7:  Missing System Restore Points"
date: 2012-04-17
---

<div class="post-body">
<p>I was using Windows 7 with <a href="https://web.archive.org/web/20140904063715/http://windows.microsoft.com/en-US/windows-vista/System-Restore-frequently-asked-questions" target="_blank">System Restore</a> (Start &gt; Run &gt; SystemPropertiesProtection.exe) turned on for drive C only.  It was set to allocate 16GB of the drive to store System Restore points.  Yet it was storing only two such points.  Clicking "Show more restore points" did not increase the number.  <br/>
<br/>
By way of background, I was not running a dual-boot system and had been making daily backups.  Recently, I had been making those backups manually by running "start "" SystemPropertiesProtection.exe" in <a href="https://web.archive.org/web/20140904063715/http://raywoodcockslatest.blogspot.com/2011/07/windows-7-batch-files-that-run-things.html" target="_blank">a daily batch file</a>, so that I could watch the situation.  (The purpose of the empty internal quotes ("") was to provide a null argument.  It probably wasn't necessary in this case; it seemed to be helpful sometimes.)  Previously, I had been using <a href="https://web.archive.org/web/20140904063715/http://www.sevenforums.com/tutorials/494-system-restore-point-shortcut.html" target="_blank">a VBS script</a> triggered by <a href="https://web.archive.org/web/20140904063715/http://raywoodcockslatest.blogspot.com/2011/12/windows-7-tweaked-installation-latest.html" target="_blank">a Task Scheduler entry</a>.  I had also not <a href="https://web.archive.org/web/20140904063715/http://www.askvg.com/fix-windows-7-deletes-all-system-restore-points-upon-reboot/" target="_blank">rebooted</a> recently.  According to <a href="https://web.archive.org/web/20140904063715/http://www.moo0.com/?top=http://www.moo0.com/software/SystemMonitor/" target="_blank">Moo0</a>, at this particular time my system had been up for nearly three days, but my only restore points were from within approximately the past 24 hours.<br/>
<br/>
This problem seemed to have <a href="https://web.archive.org/web/20140904063715/http://www.makeuseof.com/answers/windows-vista-system-restore-points-automatically-deleted/" target="_blank">many possible causes</a>.  Glancing through a list of potential fixes provided on <a href="https://web.archive.org/web/20140904063715/http://bertk.mvps.org/html/missingrps.html" target="_blank">a website</a> oriented toward Windows XP, I saw a reference to Event Viewer (Start &gt; Run &gt; eventvwr.msc).  I was not very familiar with that, so I ran <a href="https://web.archive.org/web/20140904063715/https://www.google.com/search?q=%22Windows+7%22+%22Event+Viewer%22+%22System+Restore%22&amp;ie=utf-8&amp;oe=utf-8&amp;aq=t&amp;rls=org.mozilla:en-US:official&amp;client=firefox-a" target="_blank">a search</a> and found <a href="https://web.archive.org/web/20140904063715/http://www.techsupportforum.com/forums/f217/things-with-event-viewer-543372.html" target="_blank">a suggestion</a> to focus on VSS entries.  VSS <a href="https://web.archive.org/web/20140904063715/http://en.wikipedia.org/wiki/Shadow_Copy" target="_blank">stood for</a> Volume Shadow Copy or Volume Snapshot Service.  The basic idea was that VSS would allow Windows to make a copy of a file even if that file was in use, which would be the situation for some Windows 7 system files while the system was running.  Apparently System Restore used VSS.  The suggestion was, in other words, to see what Event Viewer would say about VSS-related problems.  To do that, I went into Event Viewer &gt; Filter Current Log &gt; Event Sources &gt; VSS &gt; OK.  This gave me a list of items.  (Later -- see below -- I saw that I had taken incomplete notes here.)  I clicked on the Date and Time column heading to get the most recent ones.  These were all Information-level notices.  They were all the same:  "The VSS service is shutting down due to idle timeout."  This did not seem relevant to my problem.  VSS was running.  I was getting System Restore points.  They were just being deleted prematurely for some reason.<br/>
<br/>
<a href="https://web.archive.org/web/20140904063715/http://www.makeuseof.com/answers/windows-vista-system-restore-points-automatically-deleted/" target="_blank">Another suggestion</a> was to check Services (Start &gt; Run &gt; services.msc) to verify these settings:  Volume Shadow Copy = manual or automatic; Task Scheduler = automatic; Windows Backup = manual or automatic.  Again, these suggestions seemed irrelevant, since the restore points were being made.  In any case, they were set correctly on my system.  Along with those suggestions, though, was a worthier one:  go back into Event Viewer and look for System Restore entries with Event ID numbers 8194, 8195, 8196, or 8198.  Of these, the ones that seemed most likely to be relevant were 8195 (System Restore Deactivated) and 8198 (Restore Point Deleted).  <a href="https://web.archive.org/web/20140904063715/https://www.google.com/search?num=50&amp;hl=en&amp;newwindow=1&amp;client=firefox-a&amp;hs=xo7&amp;rls=org.mozilla%3Aen-US%3Aofficial&amp;q=%22Windows+7%22+%22Event+Viewer%22+8198+-xp&amp;oq=%22Windows+7%22+%22Event+Viewer%22+8198+-xp&amp;aq=f&amp;aqi=&amp;aql=&amp;gs_sm=3&amp;gs_upl=52903l52903l0l53901l1l1l0l0l0l0l199l199l0.1l1l0&amp;gs_l=serp.3...52903l52903l0l53902l1l1l0l0l0l0l199l199l0j1l1l0" target="_blank">A search</a> focusing on 8198 did not turn up anything immediately obvious, so I shelved it for the moment.  In Event Viewer, I sorted by clicking on the Event ID column.  It took a while to sort.  It showed no errors anywhere near 8194 to 8198.<br/>
<br/>
A seemingly related suggestion was to run Task Scheduler (Start &gt; Run &gt; taskschd.msc) &gt; Task Scheduler Library (left pane) &gt; Microsoft &gt; Windows &gt; System Restore &gt; select an item in the top pane &gt; History tab (middle pane).  There didn't seem to be a relevant item in the top pane, but I just clicked on something.  I saw that the History tab said "History (disabled)."  <a href="https://web.archive.org/web/20140904063715/https://www.google.com/search?q=%22Windows+7%22+%22Task+Scheduler%22+%22History+%28disabled%29%22&amp;ie=utf-8&amp;oe=utf-8&amp;aq=t&amp;rls=org.mozilla:en-US:official&amp;client=firefox-a" target="_blank">A search</a> yielded <a href="https://web.archive.org/web/20140904063715/http://social.technet.microsoft.com/Forums/en-US/w7itprogeneral/thread/4f56f320-266a-4075-94e7-3664bcb4bd3e" target="_blank">the suggestion </a>that I go into Task Scheduler's right pane &gt; Enable All Tasks History.<br/>
<br/>
<a href="https://web.archive.org/web/20140904063715/http://helpdeskgeek.com/help-desk/fix-missing-system-restore-points-in-windows-vista-and-7/" target="_blank">One obvious suggestion</a> was to make sure I had ample space on my drive for the System Restore points.  In Windows Explorer &gt; right-click &gt; Properties &gt; General tab, drive C showed only 2.1GB free on an 80GB partition.  I was not sure whether that included what I had already allocated for System Restore points.  To figure this out, I wanted to see the size of the System Volume Information folder, which was where Windows 7 stored those points.  In Windows Explorer &gt; right-click &gt; Properties, System Volume Information was shown as having size zero.  To change that, I followed <a href="https://web.archive.org/web/20140904063715/http://www.theeldergeek.com/system_volume_information_folder1.htm" target="_blank">the suggestion</a> to go into Properties &gt; Security tab &gt; Edit &gt; Add &gt; Administrators &gt; Check Names &gt; OK &gt; Full Control &gt; OK.  This gave me an error:<br/>
<blockquote>Error Applying Security<br/>
<br/>
An error occurred while applying security information to:<br/>
<br/>
C:\System Volume Information\WindowsImageBackup<br/>
<br/>
Acesss is denied.</blockquote>I got recurring messages like that.  At some point, I clicked Cancel.  I got a warning that I should Continue to avoid inconsistencies, but there was no option to Continue.  The box was now showing Full Control despite the error message.  It now reported that the System Volume Information folder had a size of 6.45 GB.  That roughly agreed with System Restore, which was reporting that my Current Usage was 6.10 GB.  I had made one or two more restore points; System Restore said I now had four.  I reduced the size allocated to System Restore from 16GB to 12GB and took another look at the Properties for drive C.  It still reported 2.1GB free.  So apparently the space allocated for System Restore was not marked as unavailable until it was actually used; the allocation was just a ceiling for System Restore, telling it when to start jettisoning old restore points.  As long as I remembered to exclude the System Volume Information folder from drive image backups (so as to prevent those backups from being unnecessarily inflated), there did not seem to be any particular drawback to allocating large amounts of space, just in case I would want to have access to historical backup points.  As a side note, it occurred to me that it might be possible to archive such points.  I could have experimented with making a ZIP copy of the contents of System Volume Information, to see if System Restore would work from a restored ZIP.<br/>
<br/>
The next day, now that I had enlarged drive C, it showed plenty of space.  System Volume Information was back to showing zero bytes, so I repeated the steps above.  This time I went all the way through, clicking Continue until it stopped asking.  It only asked a half-dozen times.  Properties was still showing only about 6.6 GB allocated.  I still had only those restore points that had been made in the last 24 hours.  Disk space was not the issue.<br/>
<br/>
It seemed that I must have overlooked something in Event Viewer.  I couldn't tell, from these notes, which part of Event Viewer I had examined the previous day.  Evidently I had selected something in the left pane in order to get the Filter Current Log option.  Maybe I had selected the wrong thing.  I saw, now, that the original suggestion was to click Windows Logs &gt; Application in the left pane.  Filtering there for VSS still produced no errors numbered around 8194 to 8198.  Instead of filtering for VSS, I went to the top of the list and clicked "All Event Sources."  That produced nothing -- maybe it was still calculating -- so I changed the top line, "Logged," to "Last 7 days."  Sorting by the Event ID column, I saw an 8193 item (created restore point) but no indications that any restore points had been deleted.<br/>
<br/>
I had rebooted in order to change the size of the partition.  Maybe restore points were being deleted during reboots?  I didn't plan to reboot during the next day or more, so I decided to let it sit another day and then take another look.  This time, I had the same restore points, now going back two days, plus some new ones.<br/>
<br/>
Over the next several days, my restore points accumulated.  Apparently I had fixed something.  Rebooting may or may not have been removing them previously; if so, that was no longer happening.  At the time when I was writing these words, the system had been up for only about one day, but the available restore points stretched back almost a week.<br/>
<br/>
So now I had an opportunity to distill a lesson from these remarks, because my secondary computer was doing the same thing.  It was keeping restore points going back only a day or two.  So what had I done to fix the problem?  I wasn't sure.  I went back through some of the foregoing steps.  First, I closed System Restore.  I went into System Volume Information &gt; right-click &gt; Properties &gt; Security tab &gt; Edit &gt; Add &gt; Administrators &gt; Check Names &gt; OK &gt; Full Control &gt; OK.  I clicked Continue through a half-dozen error messages.  I went back into System Restore (i.e., Start &gt; Run &gt; SystemPropertiesProtection.exe &gt; select drive C &gt; Configure &gt; reserve 10GB &gt; OK.  It was 6GB before; it was possible (but seemed unlikely) that that was the problem.<br/>
<br/>
I let it go for a few days.  The problem was solved.  I was now getting restore points going back several days and surviving reboots.</p>
<div style="clear: both;"></div>
</div>

---
### Comments
**Mike Fisher**:
Where does System Restore keep its restore points?I am using Windows 7 Professional (64-bit) 6.1.7601 Service Pack 1.  I used System Restore to undo system changes to my computer.  I want to undo this System Restore operation, but System Restore says there are no restore points.  How then can I undo this?(I recovered the entire contents of C: with Recuva.)

**raywood**:
I think they're in the System Volume Information folder.  See if thisTech Republic articlehelps.

