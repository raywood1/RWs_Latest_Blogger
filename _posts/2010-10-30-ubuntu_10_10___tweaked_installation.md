---
layout: post
title: "Ubuntu 10.10:  Tweaked Installation"
date: 2010-10-30
---

<div class="post-body">
<p>I had previously installed Ubuntu 10.04, and had arrived at a fast way of adjusting the basic installation to my needs. This post updates and simplifies <a href="https://web.archive.org/web/20190906053710/http://raywoodcockslatest.blogspot.com/2010/09/ubuntu-1004-installation-streamlined.html">the separate post</a> in which I described that process.  Here, I was using Ubuntu 10.10, not 10.04.<br/>
<br/>
This post begins with a basic Ubuntu setup already installed.  That basic installation process was very straightforward; but for those unfamiliar with Ubuntu, there were many webpages on <a href="//web.archive.org/web/20190906053710/https://www.google.com/search?hl=en&amp;q=%22install+Ubuntu+10.10%22&amp;sourceid=navclient-ff&amp;rlz=1B3GGLL_enUS403US403&amp;ie=UTF-8">how to install Ubuntu 10.10</a>.  The question addressed in this post was, what additional steps did I need to take, in order to make Ubuntu look and act the way I wanted?  Of course, people will have various preferences.  This post does not go into that kind of individual detail.  It is more a matter of how to go about choosing and preserving one's desired setup.<br/>
<br/>
In this case, I had installed Ubuntu 10.10 in a two-drive RAID0 setup.  I have written <a href="https://web.archive.org/web/20190906053710/http://raywoodcockslatest.blogspot.com/2010/10/ubuntu-1010-streamlined-raid-0.html">a separate post</a> on that as well.  It looked and acted the same as a normal single-drive Ubuntu installation.  But the following discussion contains a few references to the setup described in that other post, for those who have come to this description from there.<br/>
<br/>
<b>The Home Partition</b><br/>
<br/>
If I had been installing Ubuntu without using RAID, I probably would have decided, in the initial installation, to install everything in a single root ("/") partition.  But the RAID process had required the creation of a separate /boot partition, so I now had those two partitions instead of one.  Either way, though, my installation did not yet include a separate /home partition.  I did want a separate /home partition to be part of the mix, because /home was where all kinds of program settings were preserved.<br/>
<br/>
I had retained a copy of my previous /home partition.  It was on a third hard drive.  That is, it was not part of the RAID array, and I did not plan to copy it into the RAID array.  RAID 0 is risky, in the sense that failure of any drive in the array means the end of the entire array and everything on it.  So I was just going to leave the /home partition on that separate drive, and back it up from there.  The question was, how should I get the new installation to recognize that separate /home partition?  I had struggled with this step previously, but now I wanted to write it up in simpler form.<br/>
<br/>
On that third drive, I had a folder called Saved Settings.  In that folder, I had kept a copy of my old fstab (that is, the file called "fstab," from the /etc folder, viewable by typing "sudo gedit /etc/fstab").  I added lines from that copy into my current fstab, making sure that its lines referred to UUIDs (available via "sudo blkid") rather than to drive letters (e.g., sda, sdb), so that the commands in the fstab would still function if I rearranged partitions in my computer.  I also made sure it had a line referring to the correct UUID for the /home partition.  I saved and closed fstab.<br/>
<br/>
To give /home a place to be mounted, I typed "sudo mkdir /media/home."  To prevent the newly installed (and nearly empty) /home partition from interfering with the selection and use of my preferred, preexisting /home partition, I typed "sudo mv /home /old_home."  I had meanwhile allowed Update Manager to install updates, and that process was done, so at this point I rebooted.  I got an error message, "Could not update ICEauthority file /home/ray/.ICEauthority."  I clicked through that, and after a moment my old, preferred desktop layout was there and seemed to be functioning normally.  (I worked through the ICEauthority problem as described in <a href="https://web.archive.org/web/20190906053710/http://raywoodcockslatest.blogspot.com/2010/10/ubuntu-1010-error-could-not-update.html">a separate post</a>.  Basically, the solution was to make sure the user (i.e., ray, not root) had ownership of the home folder.)  The last step was to delete the temporary old_home folder I had created by typing "sudo rm -r /old_home."<br/>
<br/>
<b>Repositories</b><br/>
<br/>
Having the home folder in place meant that about 90% of the work of installing and configuring programs was already done and saved.  This was one huge advantage over Windows XP installations, where the only programs that did not have to be reinstalled in the event of a new operating system installation were <a href="https://web.archive.org/web/20190906053710/http://raywoodcockslatest.blogspot.com/2010/09/windows-xp-integrating-start-menu-with.html">portable applications</a>.  This section describes the relatively few steps that I did have to take to install applications and configure my Ubuntu system, as compared to <a href="https://web.archive.org/web/20190906053710/http://raywoodcockslatest.blogspot.com/2010/07/tweaking-windows-xp-virtual-machine.html">the writeup in a separate post</a> on Windows XP reinstallation.<br/>
<br/>
I could not rely on my previously saved sources.list file to set up my repositories, since I was now dealing with a new version of Ubuntu.  Instead, I went into System &gt; Administration and discovered that, unlike Ubuntu 10.04 (as discussed in <a href="https://web.archive.org/web/20190906053710/http://raywoodcockslatest.blogspot.com/2010/09/ubuntu-1004-repositories.html">a separate post</a>), Ubuntu 10.10 no longer had a Software Sources option.  <a href="//web.archive.org/web/20190906053710/https://www.google.com/search?hl=en&amp;q=%22software+sources%22+ubuntu+10.10&amp;sourceid=navclient-ff&amp;rlz=1B3GGLL_enUS403US403&amp;ie=UTF-8">A search</a> revealed that this change was made to make Ubuntu <a href="https://web.archive.org/web/20190906053710/http://www.webupd8.org/2010/09/software-sources-disabled-from-ubuntu.html">more user-friendly</a>.  I could either edit the menu to add back the Software Sources option or use System &gt; Administration &gt; Synaptic Package Manager as an alternative.  Choosing the latter, I went into Synaptic's Settings &gt; Repositories &gt; Other Software and selected the non-source options.  In the Authentication tab, I saw a list of Trusted Software Providers, and the names on it were Ubuntu (archive, CD image, and extras), GetDeb, and Google.  I had no problem with any of these except maybe Ubuntu extras.  I wasn't sure if these had come from my previous installation or were pre-supplied with Ubuntu 10.10.  I could have hit "Restore Defaults" to find out, but then I would have had to figure out how to restore them.  I closed out of that and, back in Synaptic, clicked Reload.<br/>
<br/>
In Terminal, I typed "sudo gedit /etc/apt/sources.list."  I saw that it contained a handful of repositories.  I wondered if there were others I should include, so I went to the <a href="https://web.archive.org/web/20190906053710/http://repogen.simplylinux.ch/">Ubuntu Sources List Generator</a> and got a list that was more concise and that also included a few third-party repos of interest (i.e., GetDeb, Google, Medibuntu, Wine, and X Updates).  I ran the commands in the "Getting the GPG Keys" list from the bottom of the page, one at a time.  In previous installations, I had saved such commands in a text file and had executed it, but that had made it easier to overlook error messages.  In this case, the Medibuntu command gave me "Unable to locate package medibuntu-keyring."  <a href="//web.archive.org/web/20190906053710/https://www.google.com/search?hl=en&amp;q=%22Unable+to+locate+package+medibuntu-keyring%22&amp;sourceid=navclient-ff&amp;rlz=1B3GGLL_enUS403US403&amp;ie=UTF-8">A search</a> indicated that virtually nobody had gotten precisely that message.  Not a good sign.  <a href="https://web.archive.org/web/20190906053710/https://help.ubuntu.com/community/Medibuntu">A community documentation page</a> gave me a different command to add Medibuntu:<br/>
<blockquote>sudo wget --output-document=/etc/apt/sources.list.d/medibuntu.list http://www.medibuntu.org/sources.list.d/$(lsb_release -cs).list &amp;&amp; sudo apt-get --quiet update &amp;&amp; sudo apt-get --yes --quiet --allow-unauthenticated install medibuntu-keyring &amp;&amp; sudo apt-get --quiet update</blockquote>... all on one line!  It also said that Medibuntu's repository is deactivated whenever you upgrade to a newer Ubuntu release, so this reinstallation would have to happen each time.  I copied and pasted that command and ran it.  It gave me an error message:<br/>
<blockquote>Unable to lock the administration directory (/var/lib/dpkg/), is another process using it?</blockquote>to which the answer was yes, of course, Synaptic is still running.  I shut down Synaptic and tried again.  This time, it ran.  I took another look at the Authentication tab in Synaptic (see above), and now Medibuntu was on the list of trusted software providers.  So the answer to my question was, this was my customized list.<br/>
<br/>
I went back to the process of running commands generated by the Ubuntu Sources List Generator.  They ran without further difficulty.  I typed "sudo gedit /etc/apt/sources.list" again, and replaced its contents with the lines generated by that Generator.  I took another look at Synaptic's Authentication tab, and this produced an error indicating that I had duplicate entries for Medibuntu and, I think, something else.  But when I tried to figure out what that was about, the error went away, and I didn't seem to be able to get it back.  Anyway, the Authentication tab did show that I now had the five third-party repos that had interested me (above), so all that remained was to go into System &gt; Administration &gt; Update Manager &gt; Check and download the additional updates that it detected.<br/>
<br/>
<b>Installing Programs &amp; Other Adjustments</b><br/>
<br/>
In Terminal, I navigated to my Saved Settings folder (basically, cd "/folder name/" -- using quotes because "folder name" has a space in it) and verified that I had a copy of the installed-software file that I had created, in my previous installation, by typing "dpkg --get-selections &gt; installed-software."  Now that I wanted to restore the programs listed in installed-software, I entered these commands:<br/>
<blockquote>sudo dpkg --set-selections &lt; installed-software<br/>
sudo apt-get install dselect<br/>
sudo dselect</blockquote>That opened up dselect.  The dpkg command had provided the list of what I wanted to install, so all I had to do now, in dselect, was to arrow down and hit Enter at the Install option.  This gave me an option of installing a large quantity of stuff, and I said OK, do it.  That took an hour.  At the end, I declined to let it erase previously downloaded .deb files, when it asked.  <a href="https://web.archive.org/web/20190906053710/http://sudo%20dpkg%20--set-selections%20%3c%20installed-software/">The last time</a> I used this installed-software approach, I got a bunch of errors after reboot, and had to work back through the process manually.  There were some errors this time, too (see below), but they did not appear to be related to the dselect process.<br/>
<br/>
As before, I navigated to the folders containing other program downloads (with .deb, .gz, .bin, and .bundle extensions).  I typed "sudo sh [filename]" to install my .bin and .bundle downloads (e.g., GoogleEarthLinux.bin).  Double-clicking on the filename in Nautilus no longer installed my .deb downloads; instead, I had to right-click and choose "Open with GDebi Package Installer."  In the case of <a href="https://web.archive.org/web/20190906053710/http://raywoodcockslatest.blogspot.com/search?q=Synology">my Synology software</a>, I typed "sudo sh install.sh."  I wasn't sure where to install it, so I told it to install in /home, just in case that would spare me from having to install it again.  But I should have said /home/ray.  When I was done with all installations, I went into Update Manager, and ran and reran it until I was all caught up. <br/>
<br/>
GRUB2 menu edits were <a href="https://web.archive.org/web/20190906053710/http://raywoodcockslatest.blogspot.com/2010/09/ubuntu-1004-installation-another-go.html">the same as before</a>:  to get rid of the Memtest+ options, I typed "sudo chmod -x /etc/grub.d/20_memtest86+." To let Ubuntu remember which operating system it had used last, I typed "sudo gedit /etc/default/grub," changed the first line to be "GRUB_DEFAULT=saved," and added a second line that said "GRUB_SAVEDEFAULT=true."  To limit the number of Ubuntu kernels shown, I typed "sudo gedit /etc/grub.d/10_linux," added "GRUB_DISABLE_LINUX_RECOVERY=true" at the top, and changed two lines at the bottom to be three that read as follows:<br/>
<blockquote>list=`echo $list | tr ' ' '\n' | grep -vx $linux | tr '\n' ' '`<br/>
list=`version_find_latest $list`<br/>
done</blockquote>I saved and closed that and typed "sudo update-grub."<br/>
<br/>
I also needed to make some adjustments for VMware.  First, I typed "sudo vmware" and made some root adjustments there.  <a href="https://web.archive.org/web/20190906053710/http://raywoodcockslatest.blogspot.com/2010/07/resizing-virtual-disks-in-vmware.html">As before</a>, I typed "sudo gedit [path][filename].vmx," for the .vmx file pertaining to this VM; and at the end of that file I added a line that said this:<br/>
<blockquote>bios.bootDelay = "10000"</blockquote>and that bought me ten seconds instead of one or two, when that vmware logo came up.  In a variation from Ubuntu 10.04, the restricted drivers for my monitor were now at System &gt; Administration &gt; Additional Drivers.<br/>
<br/>
<b>Bugs and Other Problems</b><br/>
<br/>
There were some problems.  First, BOINC would not suspend itself when the system was in use, so I just suspended it, period.  Also, as discussed in <a href="https://web.archive.org/web/20190906053710/http://raywoodcockslatest.blogspot.com/2010/10/ubuntu-1010-problems-with-firefox-3612.html">a separate post</a>, there were some Firefox errors.  The solution there was to completely uninstall and reinstall Firefox, though possibly it would have been sufficient just to uninstall firefox-gnome-support and delete my profile.<br/>
<br/>
Another problem was that Ubuntu was not clearly recognizing all local and network partitions.  The problem of mapping the drive in my Synology NAS required <a href="https://web.archive.org/web/20190906053710/http://raywoodcockslatest.blogspot.com/2010/10/synology-nas-mapping-network-drive.html">another separate post</a>.  In that case, it came down to a problem with the line used to mount the drive in fstab.  It had seemed like there were other drive recognition problems, but evidently they sorted themselves out, or perhaps I was just mistaken.  At this point, the drives seemed to be recognized in good form.<br/>
<br/>
There was also the problem that GParted wouldn't run.  It wasn't just in my installation; it wasn't running when I booted from the live CD either.  I guessed that this was some kind of brand-new bug in Ubuntu 10.10 that would be fixed shortly.  When I started GParted from System &gt; Administration, it would start up, but then it would disappear after just a few seconds.  When I typed "sudo gparted" or "gksu gparted," it did the same thing, but it gave me an error message:<br/>
<blockquote>glibmm-ERROR **:<br/>
unhandled exception (type std::exception) in signal handler:<br/>
what: basicI_string::_S_create<br/>
aborting...</blockquote><a href="//web.archive.org/web/20190906053710/https://www.google.com/search?hl=en&amp;q=glibmm-ERROR+gparted&amp;sourceid=navclient-ff&amp;rlz=1B3GGLL_enUS403US403&amp;ie=UTF-8">A search</a> indicated that this was indeed a bug in Ubuntu.  <a href="https://web.archive.org/web/20190906053710/http://gparted-forum.surf4.info/viewtopic.php?id=14390">It looked like</a> a new release would be fixing the problem imminently.  Another problem:  Google Earth would not install.  I got this error message:<br/>
<blockquote>parser error : Document is empty<br/>
parser error: Start tag expected, '&lt;' not found<br/>
Couldn't load 'setup.data/setup.xml'</blockquote>The command I used was "sudo sh GoogleEarthLinux.bin."  The first response to it was "Verifying archive integrity... All good."  Just in case, I downloaded a replacement of GoogleEarthLinux.bin, but got the same result.  It looked like <a href="//web.archive.org/web/20190906053710/https://www.google.com/search?num=50&amp;hl=en&amp;newwindow=1&amp;rlz=1B3GGLL_enUS403US403&amp;q=%22parser+error%22+%22document+is+empty%22+%22google+earth%22+%22Ubuntu+10.10%22&amp;aq=f&amp;aqi&amp;aql&amp;oq&amp;gs_rfai">others had also had this problem</a>.  It seemed to be another instance of Ubuntu 10.10 not yet having all the kinks worked out.  I started with <a href="https://web.archive.org/web/20190906053710/http://ubuntuforums.org/showthread.php?t=1595339&amp;page=2">a lengthy thread</a> on the issue.  <a href="https://web.archive.org/web/20190906053710/http://ubuntuforums.org/showpost.php?p=9971687&amp;postcount=16">One post</a> in that thread recommended a command-line alternative, which in full form went like this:<br/>
<blockquote>sudo apt-get install googleearth-package<br/>
sudo make-googleearth-package --force<br/>
sudo dpkg -i googleearth_5.2.1.1588+0.5.7-1_i386.deb</blockquote>I tried that.  The make-googleearth-package command generated a lot of errors that included the sentence, "Can't extract name and version from library name."  I got that long package name shown in the last line (googleearth_5.2.1 etc.) from one of the last lines produced by the make-googleearth-package command:  it said this was the name of the package it was building.  (It also seemed to say that simply "googleearth" was the name of the package, but that didn't work.)  The third command (sudo dpkg etc.) seemed to run successfully.  There was also now a Google Earth icon in Applications &gt; Internet &gt; Google Earth.  I clicked on that, and it worked.<br/>
<br/>
Another problem involved VMCI Sockets.  I have addressed that one in <a href="https://web.archive.org/web/20190906053710/http://raywoodcockslatest.blogspot.com/2010/11/vmware-workstation-71-in-ubuntu-1010.html">a separate post</a>.  I ran out of time to continue this project at the time.  When I returned to it two months later, <a href="https://web.archive.org/web/20190906053710/http://raywoodcockslatest.blogspot.com/2011/01/farewell-ubuntu.html">I had decided</a> to stop trying to maintain a primarily Ubuntu machine, but instead to return to Windows 7 for the foreseeable future.</p>
<div style="clear: both;"></div>
</div>

---
### Comments
