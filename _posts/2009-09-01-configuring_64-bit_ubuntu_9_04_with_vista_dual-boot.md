---
layout: post
title: "Configuring 64-bit Ubuntu 9.04 with Vista Dual-Boot"
date: 2009-09-01
---

<div class="post-body">
<p>I had a Compaq CQ60-420US laptop.  It had come with Vista pre-installed.  I didn't like that, so I wiped it off.  This led to a whole ordeal in trying to get the hard drive to work with WinXP, for which I had developed lots of tricks and tweaks.  That effort ultimately failed, and I wound up with Vista back on the thing after all.  I had wanted to get away from dual booting, but I still needed some flavor of Windows for the occasional hardware interaction, e.g., updating the BIOS and other firmware.  So for now, I was going to leave Vista in place and set up a 64-bit Ubuntu 9.04 (Jaunty Jackalope) dual-boot with it.  This post describes the process of setting up that dual boot.

A review of <a href="//web.archive.org/web/20190906053744/https://www.google.com/search?hl=en&amp;safe=off&amp;rlz=1B3GGGL_enUS318US318&amp;num=50&amp;newwindow=1&amp;q=intitle:%22dual+boot%22+vista+ubuntu+9.04+64-bit+OR+jaunty+2009+-2008+-2007+-2006+-2005&amp;aq=f&amp;oq&amp;aqi">some guides</a> gave me the general impression that installing a Vista-Ubuntu dual boot was much like installing a WinXP-Ubuntu dual boot, unless you used the <a href="//web.archive.org/web/20190906053744/https://www.google.com/search?hl=en&amp;safe=off&amp;rlz=1B3GGGL_enUS318US318&amp;num=50&amp;newwindow=1&amp;q=vista+ubuntu+wubi&amp;aq=f&amp;oq&amp;aqi">wubi</a> alternative.  The approach I took was as follows:
<ol><li>With Vista already installed, insert the Ubuntu program CD, reboot, and go through the ordinary installation sequence.  If you do nothing, the CD will pretty much take you right to the Install icon.  If <a href="//web.archive.org/web/20190906053744/https://www.google.com/search?hl=en&amp;q=bios+setup+boot+sequence&amp;sourceid=navclient-ff&amp;rlz=1B3GGGL_enUS318US318&amp;ie=UTF-8">your BIOS isn't set</a> to boot from CD before hard drive, hit F2 or Esc or Del or F8 or whatever key it is that gets you into your BIOS setup, promptly after the computer first starts up, and adjust the boot priority there.</li><li>You may find that <a href="//web.archive.org/web/20190906053744/https://www.google.com/search?hl=en&amp;q=gparted+cd&amp;sourceid=navclient-ff&amp;rlz=1B3GGGL_enUS318US318&amp;ie=UTF-8">the bootable Gparted CD</a> provides a clearer view of hard drive partitions than does the partitioner in the Ubuntu installer.  If the partitioning step leaves you dazed and confused, you may want to back up, download Gparted, burn yourself a CD, boot with that first, set up your partitions as you like, and then come back into the Ubuntu installation process.  Note:  if you're going to run Windows in a virtual machine, you may want to give it an NTFS partition somewhere, so you have a place to store data.  Windows can't read Linux (e.g., ext3) partitions.</li><li>After the initial installation, make sure that Vista starts up OK.  No point spending hours refining a system that isn't ready for prime time.  Then restart and go into Ubuntu, and make various adjustments, including these:  (a) Nautilus &gt; View &gt; Show Hidden Files.  (b) Nautilus &gt; Edit &gt; Preferences &gt; Behavior &gt; Always open in browser windows. </li><li>Go through the steps described in my previous post on <a href="https://web.archive.org/web/20190906053744/http://raywoodcockslatest.blogspot.com/2009/08/installing-ubuntu-904-jaunty-jackalope_25.html">configuring Ubuntu 9.04</a> (including comments).  That post updates the first part of <a href="https://web.archive.org/web/20190906053744/http://raywoodcockslatest.blogspot.com/2009/05/installing-ubuntu-904-jaunty-jackalope.html">an earlier post</a> on how to configure 9.04.  After running updates, type "sudo gedit /boot/grub/menu.lst" and put # symbols in front of each line (i.e., older Ubuntu kernels) that you don't want to appear in the GRUB menu.</li><li>Before continuing with items in that earlier post (as explained in more detail there), I initially thought that the next step would be to <a href="https://web.archive.org/web/20190906053744/http://raywoodcockslatest.blogspot.com/2009/08/transitioning-from-windows-based-palm.html">install and configure</a> Thunderbird (just plain old thunderbird, not mozilla-thunderbird) and Lightning-extension via Synaptic.  But then I decided I would just use web-based e-mail and calendaring (probably via Gmail) on the laptop, and would download and archive my e-mails solely on my desktop, thereby sparing the need to synchronize the two computers.</li><li>Now refer back to <a href="https://web.archive.org/web/20190906053744/http://raywoodcockslatest.blogspot.com/2009/05/installing-ubuntu-904-jaunty-jackalope.html">the earlier post</a>, to install programs that came via individual downloads rather than through Synaptic.  For me, these included Google Desktop for Linux, Adobe Reader, and VMware Workstation 6.5.3.</li><li>I installed .deb files by double-clicking on them in Nautilus, and .bin and .bundle files by running "chmod +x [filename]" and then "sudo ./[filename]."  I didn't have any .tar.gz and .tar.bz2 files to install this time, but if I had, I would have moved them to my /home/[username] folder, navigated there in Terminal, and then used a <a href="https://web.archive.org/web/20190906053744/http://www.linfo.org/tar.html">tar unpack</a> command (e.g., tar -vxf [or tar xvfz] filename.tar.gz, or tar xvf filename.tar, or tar yxf filename.tar.bz2).</li><li>To install Google Earth, continuing to follow my <a href="https://web.archive.org/web/20190906053744/http://raywoodcockslatest.blogspot.com/2009/05/installing-ubuntu-904-jaunty-jackalope.html">previous notes</a>, I typed two lines:  "wget http://dl.google.com/earth/client/current/GoogleEarthLinux.bin" and then "sh GoogleEarthLinux.bin."  This gave me a Google Earth installation, but with flickering and basically nonfunctioning display.  I tried System &gt; Administration &gt; Update Manager, and at first that program assured me that my system was up-to-date; but when I made it check again, it reported errors related to Wine and Opera.  I ignored these for now, since they did not seem relevant.  People seemed to be <a href="https://web.archive.org/web/20190906053744/http://ubuntuforums.org/archive/index.php/t-1135385.html">experimenting</a> with the flickering video problem in Google Earth.  There was a relatively complex <a href="https://web.archive.org/web/20190906053744/http://ubuntuforums.org/showthread.php?t=1130582">tutorial</a> that apparently fixed it in some cases, at the risk of messing up the system.  Choosing instead an easy fix that seemed to work for some, I went to System &gt; Preferences &gt; Appearance &gt; Visual Effects and downgraded from Extra to Normal.  That didn't help.  Following <a href="https://web.archive.org/web/20190906053744/http://ubuntuforums.org/showpost.php?p=7710757&amp;postcount=3">another tip</a>, I downgraded further, from Normal to None (i.e., no visual effects), and also turned off the Atmosphere feature in Google Earth (View &gt; Atmosphere).  That fixed it.</li><li>To configure Firefox, I went to another computer and used the <a href="https://web.archive.org/web/20190906053744/https://addons.mozilla.org/en-US/firefox/addon/2109">FEBE</a> extension to make a full backup of that machine's Firefox installation.  I copied the folder containing the FEBE backup to the target computer (i.e., the one where I've been doing all this installation stuff).  I installed FEBE in Firefox on the target machine, restarted Firefox, started to watch <a href="//web.archive.org/web/20190906053744/https://www.youtube.com/watch?v=g1BtvUS0yUI">the tutorial</a> on restoring with FEBE, turned to <a href="https://web.archive.org/web/20190906053744/http://www.customsoftwareconsult.com/phpBB2/viewtopic.php?t=593">the instructions</a> on manually restoring with FEBE, and then took these steps on the target machine:  Close Firefox.  Go to the FEBE backup directory (i.e., the one where I put the FEBE backup folder that I copied over from the other computer).  Copy its .fbu file (in my case, profileFx3{default}.fbu) and rename the copy as a .zip file.  I called it FEBErestore.zip.  Extract the contents of the .zip file (creating, in my case, a folder called FEBErestore).  Move the contents of the FEBE restore folder to the Firefox profile folder, which I found in Nautilus at File System/home/ray/.mozilla/firefox/[random name].default.  In my case, for example, I moved the contents of the FEBErestore folder to this .default folder.  When it told me that a folder already exists, I said Merge All, and Replace All for the "file already exists" message.  During this process, I got an "Error while copying 'febe.jar'" message.  The details of the error said "Permission denied."  I canceled and tried again as root (type "sudo nautilus" and then do the move in the Nautilus session that opens that way).  That worked.  Then I closed everything else and started Firefox and, yeah, it looked like all the extensions were there, configured and everything.</li></ol><div>This was the extent of my Ubuntu configuration for now.  During these processes, I came across some miscellaneous issues:</div><div><ul><li>I wanted to change login passwords.  This, I thought, would be under System &gt; Administration but no, eventually I found it instead under Applications &gt; Accessories.  Double-clicking on that did not work; I had to right-click and choose Change Password; but then the password that I changed it to did not work for login.  I thought the problem might be that I hit Enter instead of clicking on the button after doing the change; that is, possibly the default was Cancel rather than Change.  I could not tell; neither button seemed to be highlighted by default.  So then it turned out that I had changed the password to unlock the keyring, rather than the password to log in.  It looked like I had changed that properly, second time around; but still no.</li><li>As in other Ubuntu installations, panels did not readily allow me to move icons to the locations I would designate.  Sometimes they would not move; sometimes they would not go exactly where I indicated.  On the bottom panel, for example, I could not rearrange them in the far right corner.  It turned out to be easier to move things *out of* the corner (where the Windows system tray would be) than to move them *into* the corner.  It turned out that I had to unlock every item that I wanted to drag another icon past.  Tooltips came up, irritatingly enough, when I was trying to move icons, making it difficult to see what I was doing.</li><li>The bottom panel failed to show icons or buttons for my currently running programs.  The solution was to right-click on the bottom panel, choose Add to Panel, and choose Window List.  But then, on reboot, it did not work again.  I fixed it by right-clicking on the end of the Window List item on the bottom panel and checking Lock to Panel.</li><li>When trying to view the contents of some hard drive partitions, such as a partition I called DATA, I got "Cannot mount volume.  You are not privileged to mount the volume 'DATA'.  Following my previous notes, in Terminal I typed "sudo mkdir /media/DATA," thinking that perhaps I had not yet created the mount point, but this gave me "cannot create directory `/media/DATA': File exists."  I typed "sudo nautilus," went to File System &gt; /media/DATA &gt; right-click &gt; Properties, and verified that I (i.e., user "ray", not just root) had full permissions.  I typed "sudo fdisk -l" (that's an L, not a one) to get a list of devices.  That showed that the DATA partition was being recognized as an NTFS device at /dev/sda4.  I typed "sudo gedit /etc/fstab" and saw that there was no line in the fstab file for /dev/sda4.  Following <a href="https://web.archive.org/web/20190906053744/http://raywoodcockslatest.blogspot.com/2009/07/recognizing-partitions-automatically-in.html">some notes</a> from a few months earlier, I typed "sudo ntfs-config."  (Note that this was one of the programs I had installed from Synaptic, above.)  This detected the VISTA programs partition (i.e., drive C in Windows), but not the DATA partition.  I ran ntfs-config again.  This time, it didn't mention the VISTA drive, but as before it did give me the option to enable an internal drive.  I accepted that.  Now I saw that there was indeed a line for the DATA partition as well.  While I was here, I used <a href="https://web.archive.org/web/20190906053744/http://www.cyberciti.biz/faq/linux-finding-using-uuids-to-update-fstab/">blkid</a> to find the UUIDs for each partition (e.g., "sudo blkid") and replaced that portion of the relevant line in fstab.  For example, the line that previously read "/dev/sda1 /media/VISTA ntfs-3g defaults,locale=en_US.UTF-8 0 0" now began with "UUID=19142FAA142F8D35" instead of "dev/sda1."  Following the format of other lines in fstab, I preceded this one with a line that said, "# Entry for /dev/sda1 : " and followed a similar procedure for the DATA partition.  I rebooted and was now able to view the NTFS-formatted VISTA and DATA partitions.  On second thought, I went back into fstab and removed the line for the VISTA partition, since I didn't expect to need it normally in Ubuntu and didn't want to expose it to accidental deletions and such.</li></ul><div>This seemed to give me a basic working dual-boot 64-bit system.  The next step, for me, was to <a href="https://web.archive.org/web/20190906053744/http://raywoodcockslatest.blogspot.com/2009/09/configuring-64-bit-vmware-workstation.html">configure VMware</a>, so that I could run any Windows program within Ubuntu.</div></div></p>
<div style="clear: both;"></div>
</div>

---
### Comments
