---
layout: post
title: "Windows 7:  Assigning Process Priorities to Prevent Slowdowns"
date: 2012-03-01
---

<div class="post-body">
<p>I had some programs that slowed down my system to the point that I could barely get any work done.  Examples included Beyond Compare (sometimes) and GoodSync (often).  These programs were not usually urgent; I would have been happy with letting them run at a slower pace, so that I could continue to use the machine in a more or less normal way.  This post describes my search for tools that would give me some control over the demands that those programs would place on my system.<br/>
<br/>
The existing tool for this purpose, Windows Task Manager (available via Ctrl-Alt-Del &gt; Start Task Manager, or via Start &gt; Run &gt; taskmgr.exe), would give me information about various processes.  Many other programs -- including various <a href="https://web.archive.org/web/20181106113357/http://pcsupport.about.com/od/windowsvista/tp/vistagadgetssu.htm" target="_blank">gadgets</a> and other sorts of monitoring tools -- offered that.  <a href="https://web.archive.org/web/20181106113357/https://encrypted.google.com/search?num=50&amp;hl=en&amp;newwindow=1&amp;client=firefox-a&amp;hs=Seh&amp;rls=org.mozilla%3Aen-US%3Aofficial&amp;q=processes+priority+%22Windows+7%22&amp;oq=processes+priority+%22Windows+7%22&amp;aq=f&amp;aqi=&amp;aql=&amp;gs_sm=12&amp;gs_upl=186951l200206l0l201845l16l16l0l0l0l1l487l3115l4.5.6.0.1l16l0" target="_blank">A search</a> led to <a href="https://web.archive.org/web/20181106113357/http://technet.microsoft.com/en-us/sysinternals/bb896653" target="_blank">Process Explorer</a> and <a href="https://web.archive.org/web/20181106113357/http://www.softpedia.com/get/PORTABLE-SOFTWARE/System/File-management/Windows-Portable-Applications-System-Explorer-Portable.shtml" target="_blank">System Explorer Portable</a>, which <a href="https://web.archive.org/web/20181106113357/http://download.cnet.com/Process-Explorer/3000-2094_4-10223605.html?tag=contentMain;contentBody;1d" target="_blank">CNET</a> and <a href="https://web.archive.org/web/20181106113357/http://www.softpedia.com/get/System/System-Info/Process-Explorer.shtml" target="_blank">Softpedia</a> portrayed as popular, highly rated replacements for Task Manager.  For basic system resource information, I was presently using (and liked) <a href="https://web.archive.org/web/20181106113357/http://www.moo0.com/?top=http://www.moo0.com/software/SystemMonitor/" target="_blank">Moo0 SystemMonitor</a>, and wasn't too interested in adding more of that right now.<br/>
<br/>
What I was more interested in was actual control of processes.  Evidently it was possible to <a href="https://web.archive.org/web/20181106113357/http://searchsystemschannel.techtarget.com/feature/Optimizing-Windows-7-application-performance" target="_blank">adjust</a> process priorities <a href="https://web.archive.org/web/20181106113357/http://www.addictivetips.com/windows-tips/tune-up-your-windows-7-by-changing-the-process-priorities/" target="_blank">manually</a> in Task Manager, and perhaps in Process Explorer and/or System Explorer Portable; but <a href="https://web.archive.org/web/20181106113357/http://www.addictivetips.com/windows-tips/prio-save-app-process-priority-check-network-connections-integrity/" target="_blank">it seemed</a> that this would work only as long as processes were running.  In other words, it seemed that the Task Manager manual setting would have to be recreated every time a program was shut down and restarted.<br/>
<br/>
Further investigation led to utilities that would apparently allow me not only to adjust priorities, but to have my adjustments be remembered.  Programs I encountered at this point included <a href="https://web.archive.org/web/20181106113357/http://www.prnwatch.com/prio.html" target="_blank">Prio</a>, <a href="https://web.archive.org/web/20181106113357/http://www.bitsum.com/prolasso.php" target="_blank">Process Lasso</a>, <a href="https://web.archive.org/web/20181106113357/http://sourceforge.net/projects/iopriority/" target="_blank">IO Priority</a>, and <a href="https://web.archive.org/web/20181106113357/http://processhacker.sourceforge.net/" target="_blank">Process Hacker</a>.  Softpedia searches indicated that Project Lasso was commercial, and had nothing for IO Priority.  I had seen a few very positive comments about Prio, so perhaps it was up and coming; but it was not a major player at either <a href="https://web.archive.org/web/20181106113357/http://www.softpedia.com/get/System/OS-Enhancements/Prio.shtml" target="_blank">Softpedia</a> or <a href="https://web.archive.org/web/20181106113357/http://download.cnet.com/Prio/3000-2094_4-10455293.html" target="_blank">CNET</a>.  Those two sources also disagreed as to whether I was getting a free or trial version.  On both <a href="https://web.archive.org/web/20181106113357/http://download.cnet.com/Process-Hacker/3000-2094_4-10971791.html" target="_blank">CNET</a> and <a href="https://web.archive.org/web/20181106113357/http://www.softpedia.com/get/System/System-Miscellaneous/Process-Hacker.shtml" target="_blank">Softpedia</a>, Process Hacker seemed to be the leading tool for process adjustment.<br/>
<br/>
The CNET download gave me both .bin and .exe versions of Process Hacker.  I was more interested in a portable version, so I unzipped the .bin and drilled down to the appropriate .exe and ran that.  It gave me a colorful, hierarchical indication of running processes.<br/>
<br/>
I decided to put it to a test.  I ran GoodSync and did a Ctrl-F in Process Hacker.  That gave me a separate list of files, processes, and threads that apparently involved GoodSync.  But where was GoodSync within the pretty list of colored processes, there in the main Process Hacker window?  I clicked on the Description heading, and that gave me an alphabetical list.  Ah, there it was.  GoodSync was currently using up to 3%, no, 5%, no, make that 10% of CPU resources.  The number kept rising.  In the amount of time it took me to write these words, it was up to 25%.  I had a quad core processor; maybe 25% was going to be the limit.  I clicked to sort on the CPU heading.  At first, GoodSync was solidly in second place as the greatest consumer of CPU resources, behind System Idle Processes.  It seemed that the latter just meant that I had a lot of idle capacity.  That seemed to be the message from Moo0 too:  the CPU was not very busy.<br/>
<br/>
Process Hacker also said that GoodSync was using a steady 468MB in Private Bytes.  <a href="https://web.archive.org/web/20181106113357/http://stackoverflow.com/questions/1984186/what-is-private-bytes-virtual-bytes-working-set" target="_blank">A StackOverflow post</a> said that private bytes was "the current size, in bytes, of memory that this process has allocated that cannot be shared with other processes."  Another post in that thread clarified:  this value included pagefile (i.e., virtual) memory.  So it didn't necessarily mean that GoodSync was using almost a half-gig of what the RAM chips in my computer could offer.  The thread seemed to say that the most important value of that number was in whether it was growing, which would indicate a memory leak -- which <a href="https://web.archive.org/web/20181106113357/http://forum.sysinternals.com/what-are-private-bytes_topic15333.html" target="_blank">apparently meant</a> that the program in question kept asking for more and more memory, without reusing or returning what it had already requested and was no longer using.  This didn't seem to be a problem:  the Private Bytes number for GoodSync had not yet risen beyond about 480MB.<br/>
<br/>
I clicked on the I/O Total Rate heading in Process Hacker.  It put GoodSync by far at the top of the list, using 22 mB/s (with variations), when the next most disk-intensive programs were generally asking for less than 20 kB/s.  This concurred with Moo0 -- it was tending to show GoodSync as the chief loader of the hard drive -- but this was giving me much more information about how GoodSync compared to the other programs running.  (I was working in the Processes tab in Process Hacker.  There were also Services and Network tabs.)  I also noticed, by this point, that the Private Bytes number did seem to be creeping upwards, now reaching 520MB.  I wondered where it would be in an hour or two.<br/>
<br/>
So now, could I put the brakes on GoodSync?  I right-clicked on it, there in Process Hacker, and saw at least three relevant options:  Terminate, Suspend, and Priority.  Of these, the only one that would put on the brakes without completely ending progress was Priority.  That one was familiar; I had seen the same options elsewhere, probably in Task Manager.  The options were Real Time, High, Above Normal, Normal, Below Normal, and Idle.  Normal was the default.  I had seen somewhere that Normal was the default for everything in Windows.<br/>
<br/>
So, sad to say, this thing wasn't going to give me fine-tuned tweaking options, like "40% of Normal" or "Run only when computer is idle" or "Try to finish this process by tomorrow morning."  I realized that not all of these possibilities might be feasible in Windows 7.  And, wow, what about RAM?  GoodSync was up to 905MB of Private Bytes now.  For that matter, Internet Explorer (where I was writing this) was at 870MB (with eight tabs open, and after 50 hours of uptime, according to Moo0).  I was using RizoneSoft MemoryBooster to keep RAM available, but it didn't have options to put restrictions on individual programs, and hitting its Optimize Memory button at this point didn't have any effect upon the Private Bytes reported by Process Hacker for GoodSync and IE.  I guessed that the situation was that memory leaks couldn't be squeezed much -- that you might basically have a choice between letting the program run or shutting it down so that memory could clear.<br/>
<br/>
I dimly recalled that GoodSync might have its own internal option to throttle itself.  A look at this point reminded me:  its Auto &gt; General tab would allow a specific sync job to slow down file copying if the average download speed exceeded a certain value.  I wasn't quite sure how that would work, but I didn't think the problem was with the speed of downloads (i.e., how quickly they would travel across the ethernet cable between computers).  What seemed most demanding about GoodSync was its use of system resources to do its calculations of what needed to be copied.  In other words, I didn't care whether it was slowing me down because of calculations, or downloads, or for some other reason; I just cared that, overall, it was slowing me down.  And at this point I was not seeing anything specifically geared toward that.  And even if I had, I'd still have a similar concern for some other programs.<br/>
<br/>
Further exploration in Process Hacker indicated that I had overlooked another possible location of options.  I right-clicked on the Process Hacker line for GoodSync and chose Miscellanous.  There, I saw at least three intriguing options:  I/O Priority, Page Priority, and Reduce Working Set.  I decided to see what would happen if I changed a bunch of settings to their minimum values.  So I changed GoodSync right-click Priority from Normal to Below Normal.  I didn't see any difference, there, between Below Normal and Real Time (the highest setting).  On, then, to Miscellaneous &gt; I/O Priority.  It was set to Normal; I set it to Very Low.  Still no obvious difference in the demands on CPU, I/O, or Private Bytes shown in Process Hacker.  Next, Miscellaneous &gt; Page Priority.  It was at 5 (the highest possible value); I set it to 1.  Finally, Miscellaneous &gt; Reduce Working Set.  It was just an on-or-off option.  I turned it on.  No visible difference in the numbers.  I decided to turn off Reduce Working Set, putting it back to its default setting, since I didn't know what it was.  Seems I was wrong:  it wasn't a checked, toggling option; evidently I was just reducing the working set further (whatever that meant) every time I hit it.<br/>
<br/>
Well, by this point, as a correction to my impression from a moment earlier, it seemed that something had changed after all.  (It helped to see this when I changed Process Handler &gt; View &gt; Update Interval to a slower setting.)  Maybe this change was due to my adjustments to the settings, or maybe GoodSync had finished something it was working on, but for whatever reason it had dropped from an I/O Total Rate of 20+ mB/s to more like 3 mB/s.  I suspected that I had now given myself the equivalent of an option to "Run only when computer is idle."  With all these priorities set so low, hopefully the computer would suppress GoodSync when I had other things to do.  The risk now was, no doubt, that GoodSync would never finish its tasks.  I would have to just let it run a while and see how that went.<br/>
<br/>
After closing Process Hacker and letting a few days pass (along with a reboot or two), I returned to see what was happening with GoodSync.  The system had now been up for a little over two days, and at this moment the spinning system tray icon showed that GoodSync was actively at work.  PH showed GoodSync as having 1.14GB in Private Bytes allocated to it.  Its I/O Total Rate was not exceeding about 1.5 mB/s.  It looked like my settings had persisted.  I was not actively using that machine at that point, so I couldn't say whether there would still be noticeable slowdowns.  But it seemed unlikely.  Moo0 was reporting that the CPU, RAM, and hard drives were almost never fully burdened.  And yet GoodSync did seem to be getting its tasks done.<br/>
<br/>
I was not quite sure whether Process Hacker right-click settings all applied only to the specific process that I had clicked on.  Some appeared to apply to all, or at least multiple, processes.  There was more to learn.  But at least it did appear that Process Hacker had enabled me to slow down a program that was grabbing too much of system resources, without noticeably impairing that program's functioning.</p>
<div style="clear: both;"></div>
</div>

---
### Comments
**raywood**:
Experience with Process Hacker over the next several weeks did not persuade me that it was achieving much control over the resource demands of GoodSync and BeyondCompare.  I also disliked that it did not retain settings from one boot to the next.  I switched to Process Explorer, but was not yet sure it was any better.

**raywood**:
Using an old version of Process Explorer caused system crashes for me.  I wasstill workingon the question of whether a new version would be better.

**Anonymous**:
Reduce working set - pushes virtual memory pages from real memory; right-click Properties, select "Threads" and then right click on a selected ThreadID to find more priority options.  Process Hacker is very powerful resource control tool.

